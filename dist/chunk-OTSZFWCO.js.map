{"version":3,"sources":["../src/convex/queries.ts","../src/convex/mutations.ts"],"names":["v"],"mappings":"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","file":"chunk-OTSZFWCO.js","sourcesContent":["/**\n * @fileoverview Query Adapter for Convex Database Operations\n *\n * This module provides a comprehensive set of query operations for interacting with\n * Convex databases through the Payload adapter. It implements a two-layer architecture:\n *\n * 1. **Convex Functions** (`convex*`): Define the Convex query handlers that run on the server\n * 2. **Adapter Functions** (`adapter*`): Client-side wrappers that invoke the Convex functions\n *\n * Each query operation supports optional indexing and where filtering using the\n * ParsedWhereFilter system for type-safe, serializable query conditions.\n *\n * @module query-adapter\n */\n\nimport {\n  queryGeneric,\n  PaginationOptions,\n  IndexRangeBuilder,\n  IndexRange,\n  GenericDocument,\n  GenericIndexFields,\n  RegisteredQuery,\n} from \"convex/server\";\nimport { v } from \"convex/values\";\n\nimport type { AdapterService } from \"../adapter/service\";\nimport type { EnhancedParsedWhereFilter } from \"../tools/query-processor\";\nimport { normalizeConvexQuery } from \"../tools/query-processor\";\n\n/**\n * Extracts the result type from a Convex get operation.\n * Handles nested Promise types and returns the unwrapped result or null.\n */\nexport type ExtractConvexGetResult<T> =\n  T extends Promise<RegisteredQuery<any, any, Promise<infer R>>>\n    ? R | null\n    : T extends RegisteredQuery<any, any, Promise<infer R>>\n      ? R | null\n      : T extends Promise<RegisteredQuery<any, any, infer R>>\n        ? R | null\n        : T extends RegisteredQuery<any, any, infer R>\n          ? R | null\n          : T | null;\n\n/**\n * Extracts the result type from a Convex query operation.\n * Handles nested Promise types and array unwrapping for collection queries.\n */\nexport type ExtractConvexQueryResult<T> =\n  T extends Promise<RegisteredQuery<any, any, Promise<infer R>>>\n    ? R extends Array<infer U>\n      ? U[]\n      : R\n    : T extends RegisteredQuery<any, any, Promise<infer R>>\n      ? R extends Array<infer U>\n        ? U[]\n        : R\n      : T extends Promise<RegisteredQuery<any, any, infer R>>\n        ? R extends Promise<infer U>\n          ? U extends Array<infer V>\n            ? V[]\n            : U\n          : R extends Array<infer U>\n            ? U[]\n            : R\n        : T extends RegisteredQuery<any, any, infer R>\n          ? R extends Promise<infer U>\n            ? U extends Array<infer V>\n              ? V[]\n              : U\n            : R extends Array<infer U>\n              ? U[]\n              : R\n          : GenericDocument[] | null;\n\n/**\n * Configuration for query index usage.\n * Allows specifying an index name and optional range builder for optimized queries.\n */\nexport type AdapaterQueryIndex =\n  | {\n      indexName: string;\n      indexRange?: (\n        q: IndexRangeBuilder<GenericDocument, GenericIndexFields, number>\n      ) => IndexRange;\n    }\n  | undefined;\n\n// ============================================================================\n// Get By ID\n// ============================================================================\n\n/**\n * Props for creating a Convex getById query function.\n */\nexport type ConvexGetByIdProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side getById operation.\n */\nexport type AdapterGetByIdProps = {\n  service: AdapterService;\n  collection: string;\n  id: string;\n};\n\n/**\n * Result type for getById operations.\n */\nexport type ConvexGetByIdResult = ExtractConvexGetResult<\n  ReturnType<typeof convexGetById>\n>;\n\n/**\n * @function convexGetById\n * Creates a Convex query function to fetch a single document by its ID.\n * Uses Convex's native `ctx.db.get()` for O(1) direct ID lookup.\n *\n * @param {ConvexGetByIdProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches a document by ID\n */\nexport function convexGetById(props: ConvexGetByIdProps) {\n  const { service } = props;\n\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      id: v.optional(v.string()),\n    },\n    handler: async (ctx, args) => {\n      if (!args.id)\n        return service.system\n          .logger(\"No ID provided for getById operation\")\n          .warn();\n\n      // Direct ID lookup using Convex's native get method (O(1) performance)\n      const doc = await ctx.db.get(args.id as any);\n\n      // Transform to Payload format\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        convex: true,\n      });\n      const result = doc ? processor.toPayload(doc) : null;\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"getById\",\n              args,\n              result: result,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return result;\n    },\n  });\n}\n\n/**\n * @function adapterGetById\n * Adapter-side function to fetch a single document by its ID.\n * Handles collection prefixing and invokes the Convex query.\n *\n * @param {AdapterGetByIdProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {string} props.id - The document ID to fetch\n * @returns {Promise<ConvexGetByIdResult>} The fetched document or null\n */\nexport async function adapterGetById(props: AdapterGetByIdProps) {\n  const { service, collection, id } = props;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterGetById\",\n            collection: collection,\n            id: id,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    convex: false,\n  });\n\n  const query = (await client.query(api.adapter.getById, {\n    collection: processor.convexQueryProps.collection,\n    id,\n  })) as ConvexGetByIdResult;\n\n  return query;\n}\n\n/**\n * GetById operation bundle containing both adapter and convex implementations.\n */\nexport const getById = {\n  adapter: adapterGetById,\n  convex: convexGetById,\n};\n\n// ============================================================================\n// Collection Query\n// ============================================================================\n\n/**\n * Props for creating a Convex collection query function.\n */\nexport type ConvexCollectionQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection query operation.\n */\nexport type AdapterCollectionQueryProps = {\n  service: AdapterService;\n  collection: string;\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection query operations.\n */\nexport type ConvexCollectionQueryResult = ExtractConvexQueryResult<\n  ReturnType<typeof convexCollectionQuery>\n>;\n\n/**\n * @function convexCollectionQuery\n * Creates a Convex query function to fetch all documents from a collection.\n * Supports optional index configuration for optimized queries.\n *\n * @param {ConvexCollectionQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches all documents\n */\nexport function convexCollectionQuery(props: ConvexCollectionQueryProps) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor.query().toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionQuery\n * Adapter-side function to fetch all documents from a collection.\n *\n * @param {AdapterCollectionQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionQueryResult>} Array of documents\n */\nexport async function adapterCollectionQuery(\n  props: AdapterCollectionQueryProps\n) {\n  const { service, collection, index } = props;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    index,\n    convex: false,\n  });\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionQuery\",\n            collection: collection,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const query = (await client.query(api.adapter.collectionQuery, {\n    collection: processor.convexQueryProps.collection,\n    index: processor.convexQueryProps.index,\n  })) as ConvexCollectionQueryResult;\n\n  return query;\n}\n\n/**\n * Collection query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionQuery = {\n  adapter: adapterCollectionQuery,\n  convex: convexCollectionQuery,\n};\n\n/**\n * Props for creating a Convex collection count query function.\n */\nexport type ConvexCollectionCountQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection count query operation.\n */\nexport type AdapterCollectionCountQueryProps = {\n  service: AdapterService;\n  collection: string;\n  wherePlan: EnhancedParsedWhereFilter;\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection count query operations.\n */\nexport type ConvexCollectionCountQueryResult = ExtractConvexQueryResult<\n  ReturnType<typeof convexCollectionCountQuery>\n>;\n\n/**\n * @function convexCollectionCountQuery\n * Creates a Convex query function to count documents in a collection.\n * Supports optional where filtering and index configuration.\n *\n * @param {ConvexCollectionCountQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that returns document count\n */\nexport function convexCollectionCountQuery(\n  props: ConvexCollectionCountQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      wherePlan: v.optional(v.any()),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        wherePlan: args.wherePlan,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const data = await processor.query().postFilter().collect();\n      const result = data.length;\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionCountQuery\",\n              args: args,\n              result: result,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return result;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionCountQuery\n * Adapter-side function to count documents in a collection with optional filtering.\n *\n * @param {AdapterCollectionCountQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {ParsedWhereFilter} props.wherePlan - The parsed where filter\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<number>} The count of matching documents\n */\nexport async function adapterCollectionCountQuery(\n  props: AdapterCollectionCountQueryProps\n) {\n  const { service, collection, wherePlan, index } = props;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionCountQuery\",\n            collection: collection,\n            wherePlan: wherePlan,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    wherePlan,\n    index,\n    convex: false,\n  });\n\n  const query = (await client.query(api.adapter.collectionCountQuery, {\n    collection: processor.convexQueryProps.collection,\n    wherePlan: processor.convexQueryProps.wherePlan,\n    index: processor.convexQueryProps.index ?? undefined,\n  })) as ConvexCollectionCountQueryResult;\n\n  return query;\n}\n\n/**\n * Collection count query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionCountQuery = {\n  adapter: adapterCollectionCountQuery,\n  convex: convexCollectionCountQuery,\n};\n\n// ============================================================================\n// Collection Where Query\n// ============================================================================\n// Uses the new two-phase design: ParsedWhereFilter  buildConvexFilter\n\n/**\n * Props for creating a Convex collection where query function.\n */\nexport type ConvexCollectionWhereQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection where query operation.\n */\nexport type AdapterCollectionWhereQueryProps = {\n  service: AdapterService;\n  collection: string;\n  wherePlan: EnhancedParsedWhereFilter;\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection where query operations.\n */\nexport type ConvexCollectionWhereQueryResult = ExtractConvexQueryResult<\n  ReturnType<typeof convexCollectionWhereQuery>\n>;\n\n/**\n * @function convexCollectionWhereQuery\n * Creates a Convex query function to fetch documents matching a where filter.\n * Uses the two-phase ParsedWhereFilter system for type-safe filtering.\n *\n * @param {ConvexCollectionWhereQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches filtered documents\n */\nexport function convexCollectionWhereQuery(\n  props: ConvexCollectionWhereQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      wherePlan: v.optional(v.any()),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        wherePlan: args.wherePlan,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor.query().postFilter().toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionWhereQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionWhereQuery\n * Adapter-side function to fetch documents matching a where filter.\n *\n * @param {AdapterCollectionWhereQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {ParsedWhereFilter} props.wherePlan - The parsed where filter\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionWhereQueryResult>} Array of matching documents\n */\nexport async function adapterCollectionWhereQuery(\n  props: AdapterCollectionWhereQueryProps\n) {\n  const { service, collection, wherePlan, index } = props;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionWhereQuery\",\n            collection: collection,\n            wherePlan: wherePlan,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    wherePlan,\n    index,\n    convex: false,\n  });\n\n  const query = (await client.query(api.adapter.collectionWhereQuery, {\n    collection: processor.convexQueryProps.collection,\n    wherePlan: processor.convexQueryProps.wherePlan,\n    index: processor.convexQueryProps.index ?? undefined,\n  })) as ConvexCollectionWhereQueryResult;\n\n  return query;\n}\n\n/**\n * Collection where query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionWhereQuery = {\n  adapter: adapterCollectionWhereQuery,\n  convex: convexCollectionWhereQuery,\n};\n\n// ============================================================================\n// Collection Order Query\n// ============================================================================\n\n/**\n * Props for creating a Convex collection order query function.\n */\nexport type ConvexCollectionOrderQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection order query operation.\n */\nexport type AdapterCollectionOrderQueryProps = {\n  service: AdapterService;\n  collection: string;\n  order: \"asc\" | \"desc\";\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection order query operations.\n */\nexport type ConvexCollectionOrderQueryResult = ExtractConvexQueryResult<\n  ReturnType<typeof convexCollectionOrderQuery>\n>;\n\n/**\n * @function convexCollectionOrderQuery\n * Creates a Convex query function to fetch documents with ordering.\n *\n * @param {ConvexCollectionOrderQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches ordered documents\n */\nexport function convexCollectionOrderQuery(\n  props: ConvexCollectionOrderQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      order: v.union(v.literal(\"asc\"), v.literal(\"desc\")),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor.query().order(args.order).toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionOrderQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionOrderQuery\n * Adapter-side function to fetch documents with ordering.\n *\n * @param {AdapterCollectionOrderQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {\"asc\" | \"desc\"} props.order - Sort order direction\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionOrderQueryResult>} Array of ordered documents\n */\nexport async function adapterCollectionOrderQuery(\n  props: AdapterCollectionOrderQueryProps\n) {\n  const { service, collection, order, index } = props;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    order,\n    index,\n    convex: false,\n  });\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionOrderQuery\",\n            collection: collection,\n            order: order,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const query = (await client.query(api.adapter.collectionOrderQuery, {\n    collection: processor.convexQueryProps.collection,\n    order: processor.convexQueryProps.order,\n    index: processor.convexQueryProps.index ?? undefined,\n  })) as ConvexCollectionOrderQueryResult;\n\n  return query;\n}\n\n/**\n * Collection order query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionOrderQuery = {\n  adapter: adapterCollectionOrderQuery,\n  convex: convexCollectionOrderQuery,\n};\n\n// ============================================================================\n// Collection Order Limit Query\n// ============================================================================\n\n/**\n * Props for creating a Convex collection order limit query function.\n */\nexport type ConvexCollectionOrderLimitQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection order limit query operation.\n */\nexport type AdapterCollectionOrderLimitQueryProps = {\n  service: AdapterService;\n  collection: string;\n  order: \"asc\" | \"desc\";\n  limit: number;\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection order limit query operations.\n */\nexport type ConvexCollectionOrderLimitQueryResult = ExtractConvexQueryResult<\n  ReturnType<typeof convexCollectionOrderLimitQuery>\n>;\n\n/**\n * @function convexCollectionOrderLimitQuery\n * Creates a Convex query function to fetch ordered documents with a limit.\n *\n * @param {ConvexCollectionOrderLimitQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches limited ordered documents\n */\nexport function convexCollectionOrderLimitQuery(\n  props: ConvexCollectionOrderLimitQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      order: v.union(v.literal(\"asc\"), v.literal(\"desc\")),\n      limit: v.number(),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor\n        .query()\n        .order(args.order)\n        .take(args.limit)\n        .toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionOrderLimitQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionOrderLimitQuery\n * Adapter-side function to fetch ordered documents with a limit.\n *\n * @param {AdapterCollectionOrderLimitQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {\"asc\" | \"desc\"} props.order - Sort order direction\n * @param {number} props.limit - Maximum number of documents to return\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionOrderLimitQueryResult>} Array of limited ordered documents\n */\nexport async function adapterCollectionOrderLimitQuery(\n  props: AdapterCollectionOrderLimitQueryProps\n) {\n  const { service, collection, order, limit, index } = props;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    limit,\n    sort: order === \"desc\" ? \"-createdAt\" : \"createdAt\",\n    index,\n    convex: false,\n  });\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionOrderLimitQuery\",\n            collection: collection,\n            order: order,\n            limit: limit,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const query = (await client.query(api.adapter.collectionOrderLimitQuery, {\n    collection: processor.convexQueryProps.collection,\n    order: processor.convexQueryProps.order,\n    limit: processor.convexQueryProps.limit,\n    index: processor.convexQueryProps.index ?? undefined,\n  })) as ConvexCollectionOrderLimitQueryResult;\n\n  return query;\n}\n\n/**\n * Collection order limit query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionOrderLimitQuery = {\n  adapter: adapterCollectionOrderLimitQuery,\n  convex: convexCollectionOrderLimitQuery,\n};\n\n// ============================================================================\n// Collection Order Paginate Query\n// ============================================================================\n\n/**\n * Props for creating a Convex collection order paginate query function.\n */\nexport type ConvexCollectionOrderPaginateQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection order paginate query operation.\n */\nexport type AdapterCollectionOrderPaginateQueryProps = {\n  service: AdapterService;\n  collection: string;\n  paginationOpts: PaginationOptions;\n  order: \"asc\" | \"desc\";\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection order paginate query operations.\n */\nexport type ConvexCollectionOrderPaginateQueryResult = ExtractConvexQueryResult<\n  ReturnType<typeof convexCollectionOrderPaginateQuery>\n>;\n\n/**\n * @function convexCollectionOrderPaginateQuery\n * Creates a Convex query function to fetch ordered documents with pagination.\n *\n * @param {ConvexCollectionOrderPaginateQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches paginated ordered documents\n */\nexport function convexCollectionOrderPaginateQuery(\n  props: ConvexCollectionOrderPaginateQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      order: v.union(v.literal(\"asc\"), v.literal(\"desc\")),\n      paginationOpts: v.object({\n        numItems: v.number(),\n        cursor: v.union(v.string(), v.null()),\n      }),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor\n        .query()\n        .order(args.order)\n        .paginate(args.paginationOpts)\n        .toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionOrderPaginateQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionOrderPaginateQuery\n * Adapter-side function to fetch ordered documents with pagination.\n *\n * @param {AdapterCollectionOrderPaginateQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {\"asc\" | \"desc\"} props.order - Sort order direction\n * @param {PaginationOptions} props.paginationOpts - Pagination configuration\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionOrderPaginateQueryResult>} Paginated result with documents\n */\nexport async function adapterCollectionOrderPaginateQuery(\n  props: AdapterCollectionOrderPaginateQueryProps\n) {\n  const { service, collection, order, paginationOpts, index } = props;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    sort: order === \"desc\" ? \"-createdAt\" : \"createdAt\",\n    pagination: true,\n    index,\n    convex: false,\n  });\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionOrderPaginateQuery\",\n            collection: collection,\n            order: order,\n            paginationOpts: paginationOpts,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const query = (await client.query(api.adapter.collectionOrderPaginateQuery, {\n    collection: processor.convexQueryProps.collection,\n    order: processor.convexQueryProps.order,\n    paginationOpts: paginationOpts,\n    index: processor.convexQueryProps.index ?? undefined,\n  })) as ConvexCollectionOrderPaginateQueryResult;\n\n  return query;\n}\n\n/**\n * Collection order paginate query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionOrderPaginateQuery = {\n  adapter: adapterCollectionOrderPaginateQuery,\n  convex: convexCollectionOrderPaginateQuery,\n};\n\n// ============================================================================\n// Collection Limit Query\n// ============================================================================\n\n/**\n * Props for creating a Convex collection limit query function.\n */\nexport type ConvexCollectionLimitQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection limit query operation.\n */\nexport type AdapterCollectionLimitQueryProps = {\n  service: AdapterService;\n  collection: string;\n  limit: number;\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection limit query operations.\n */\nexport type ConvexCollectionLimitQueryResult = ExtractConvexQueryResult<\n  ReturnType<typeof convexCollectionLimitQuery>\n>;\n\n/**\n * @function convexCollectionLimitQuery\n * Creates a Convex query function to fetch documents with a limit.\n *\n * @param {ConvexCollectionLimitQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches limited documents\n */\nexport function convexCollectionLimitQuery(\n  props: ConvexCollectionLimitQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      limit: v.number(),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor.query().take(args.limit).toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionLimitQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionLimitQuery\n * Adapter-side function to fetch documents with a limit.\n *\n * @param {AdapterCollectionLimitQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {number} props.limit - Maximum number of documents to return\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionLimitQueryResult>} Array of limited documents\n */\nexport async function adapterCollectionLimitQuery(\n  props: AdapterCollectionLimitQueryProps\n) {\n  const { service, collection, limit, index } = props;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    limit,\n    index,\n    convex: false,\n  });\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionLimitQuery\",\n            collection: collection,\n            limit: limit,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const query = (await client.query(api.adapter.collectionLimitQuery, {\n    collection: processor.convexQueryProps.collection,\n    limit: processor.convexQueryProps.limit,\n    index: processor.convexQueryProps.index ?? undefined,\n  })) as ConvexCollectionLimitQueryResult;\n\n  return query;\n}\n\n/**\n * Collection limit query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionLimitQuery = {\n  adapter: adapterCollectionLimitQuery,\n  convex: convexCollectionLimitQuery,\n};\n\n// ============================================================================\n// Collection Where Order Query\n// ============================================================================\n\n/**\n * Props for creating a Convex collection where order query function.\n */\nexport type ConvexCollectionWhereOrderQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection where order query operation.\n */\nexport type AdapterCollectionWhereOrderQueryProps = {\n  service: AdapterService;\n  collection: string;\n  wherePlan: EnhancedParsedWhereFilter;\n  order: \"asc\" | \"desc\";\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection where order query operations.\n */\nexport type ConvexCollectionWhereOrderQueryResult = ExtractConvexQueryResult<\n  ReturnType<typeof convexCollectionWhereOrderQuery>\n>;\n\n/**\n * @function convexCollectionWhereOrderQuery\n * Creates a Convex query function to fetch filtered documents with ordering.\n *\n * @param {ConvexCollectionWhereOrderQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches filtered ordered documents\n */\nexport function convexCollectionWhereOrderQuery(\n  props: ConvexCollectionWhereOrderQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      wherePlan: v.optional(v.any()),\n      order: v.union(v.literal(\"asc\"), v.literal(\"desc\")),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        wherePlan: args.wherePlan,\n        collection: args.collection,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor.query().postFilter().toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionWhereOrderQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionWhereOrderQuery\n * Adapter-side function to fetch filtered documents with ordering.\n *\n * @param {AdapterCollectionWhereOrderQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {ParsedWhereFilter} props.wherePlan - The parsed where filter\n * @param {\"asc\" | \"desc\"} props.order - Sort order direction\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionWhereOrderQueryResult>} Array of filtered ordered documents\n */\nexport async function adapterCollectionWhereOrderQuery(\n  props: AdapterCollectionWhereOrderQueryProps\n) {\n  const { service, collection, wherePlan, order, index } = props;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection: collection,\n    wherePlan: wherePlan,\n    order: order,\n    index: index,\n    convex: false,\n  });\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const query = (await client.query(\n    api.adapter.collectionWhereOrderQuery,\n    processor.convexQueryProps\n  )) as ConvexCollectionWhereOrderQueryResult;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionWhereOrderQuery\",\n            collection: collection,\n            wherePlan: wherePlan,\n            order: order,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n  return query;\n}\n\n/**\n * Collection where order query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionWhereOrderQuery = {\n  adapter: adapterCollectionWhereOrderQuery,\n  convex: convexCollectionWhereOrderQuery,\n};\n\n// ============================================================================\n// Collection Where Limit Query\n// ============================================================================\n\n/**\n * Props for creating a Convex collection where limit query function.\n */\nexport type ConvexCollectionWhereLimitQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection where limit query operation.\n */\nexport type AdapterCollectionWhereLimitQueryProps = {\n  service: AdapterService;\n  collection: string;\n  wherePlan: EnhancedParsedWhereFilter;\n  limit: number;\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection where limit query operations.\n */\nexport type ConvexCollectionWhereLimitQueryResult = ExtractConvexQueryResult<\n  ReturnType<typeof convexCollectionWhereLimitQuery>\n>;\n\n/**\n * @function convexCollectionWhereLimitQuery\n * Creates a Convex query function to fetch filtered documents with a limit.\n *\n * @param {ConvexCollectionWhereLimitQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches limited filtered documents\n */\nexport function convexCollectionWhereLimitQuery(\n  props: ConvexCollectionWhereLimitQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      wherePlan: v.optional(v.any()),\n      limit: v.number(),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        wherePlan: args.wherePlan,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor\n        .query()\n        .take(args.limit)\n        .postFilter()\n        .toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionWhereLimitQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionWhereLimitQuery\n * Adapter-side function to fetch filtered documents with a limit.\n *\n * @param {AdapterCollectionWhereLimitQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {ParsedWhereFilter} props.wherePlan - The parsed where filter\n * @param {number} props.limit - Maximum number of documents to return\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionWhereLimitQueryResult>} Array of limited filtered documents\n */\nexport async function adapterCollectionWhereLimitQuery(\n  props: AdapterCollectionWhereLimitQueryProps\n) {\n  const { service, collection, wherePlan, limit, index } = props;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    wherePlan,\n    limit,\n    index,\n    convex: false,\n  });\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionWhereLimitQuery\",\n            collection: collection,\n            wherePlan: wherePlan,\n            limit: limit,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const query = (await client.query(api.adapter.collectionWhereLimitQuery, {\n    collection: processor.convexQueryProps.collection,\n    wherePlan: processor.convexQueryProps.wherePlan,\n    limit: processor.convexQueryProps.limit,\n    index: processor.convexQueryProps.index ?? undefined,\n  })) as ConvexCollectionWhereLimitQueryResult;\n\n  return query;\n}\n\n/**\n * Collection where limit query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionWhereLimitQuery = {\n  adapter: adapterCollectionWhereLimitQuery,\n  convex: convexCollectionWhereLimitQuery,\n};\n\n// ============================================================================\n// Collection Where Paginate Query\n// ============================================================================\n\n/**\n * Props for creating a Convex collection where paginate query function.\n */\nexport type ConvexCollectionWherePaginateQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection where paginate query operation.\n */\nexport type AdapterCollectionWherePaginateQueryProps = {\n  service: AdapterService;\n  collection: string;\n  wherePlan: EnhancedParsedWhereFilter;\n  paginationOpts: PaginationOptions;\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection where paginate query operations.\n */\nexport type ConvexCollectionWherePaginateQueryResult = ExtractConvexQueryResult<\n  ReturnType<typeof convexCollectionWherePaginateQuery>\n>;\n\n/**\n * @function convexCollectionWherePaginateQuery\n * Creates a Convex query function to fetch filtered documents with pagination.\n *\n * @param {ConvexCollectionWherePaginateQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches paginated filtered documents\n */\nexport function convexCollectionWherePaginateQuery(\n  props: ConvexCollectionWherePaginateQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      wherePlan: v.optional(v.any()),\n      paginationOpts: v.object({\n        numItems: v.number(),\n        cursor: v.union(v.string(), v.null()),\n      }),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        wherePlan: args.wherePlan,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor\n        .query()\n        .paginate(args.paginationOpts)\n        .postFilter()\n        .toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionWherePaginateQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionWherePaginateQuery\n * Adapter-side function to fetch filtered documents with pagination.\n *\n * @param {AdapterCollectionWherePaginateQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {ParsedWhereFilter} props.wherePlan - The parsed where filter\n * @param {PaginationOptions} props.paginationOpts - Pagination configuration\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionWherePaginateQueryResult>} Paginated result with filtered documents\n */\nexport async function adapterCollectionWherePaginateQuery(\n  props: AdapterCollectionWherePaginateQueryProps\n) {\n  const { service, collection, wherePlan, paginationOpts, index } = props;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    wherePlan,\n    pagination: true,\n    index,\n    convex: false,\n  });\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionWherePaginateQuery\",\n            collection: collection,\n            wherePlan: wherePlan,\n            paginationOpts: paginationOpts,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const query = (await client.query(api.adapter.collectionWherePaginateQuery, {\n    collection: processor.convexQueryProps.collection,\n    wherePlan: processor.convexQueryProps.wherePlan,\n    paginationOpts: paginationOpts,\n    index: processor.convexQueryProps.index ?? undefined,\n  })) as ConvexCollectionWherePaginateQueryResult;\n\n  return query;\n}\n\n/**\n * Collection where paginate query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionWherePaginateQuery = {\n  adapter: adapterCollectionWherePaginateQuery,\n  convex: convexCollectionWherePaginateQuery,\n};\n\n// ============================================================================\n// Collection Where Order Limit Query\n// ============================================================================\n\n/**\n * Props for creating a Convex collection where order limit query function.\n */\nexport type ConvexCollectionWhereOrderLimitQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection where order limit query operation.\n */\nexport type AdapterCollectionWhereOrderLimitQueryProps = {\n  service: AdapterService;\n  collection: string;\n  wherePlan: EnhancedParsedWhereFilter;\n  order: \"asc\" | \"desc\";\n  limit: number;\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection where order limit query operations.\n */\nexport type ConvexCollectionWhereOrderLimitQueryResult =\n  ExtractConvexQueryResult<\n    ReturnType<typeof convexCollectionWhereOrderLimitQuery>\n  >;\n\n/**\n * @function convexCollectionWhereOrderLimitQuery\n * Creates a Convex query function to fetch filtered documents with ordering and limit.\n *\n * @param {ConvexCollectionWhereOrderLimitQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches limited filtered ordered documents\n */\nexport function convexCollectionWhereOrderLimitQuery(\n  props: ConvexCollectionWhereOrderLimitQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      wherePlan: v.optional(v.any()),\n      order: v.union(v.literal(\"asc\"), v.literal(\"desc\")),\n      limit: v.number(),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        wherePlan: args.wherePlan,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor\n        .query()\n        .order(args.order)\n        .take(args.limit)\n        .postFilter()\n        .toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionWhereOrderLimitQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionWhereOrderLimitQuery\n * Adapter-side function to fetch filtered documents with ordering and limit.\n *\n * @param {AdapterCollectionWhereOrderLimitQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {ParsedWhereFilter} props.wherePlan - The parsed where filter\n * @param {\"asc\" | \"desc\"} props.order - Sort order direction\n * @param {number} props.limit - Maximum number of documents to return\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionWhereOrderLimitQueryResult>} Array of limited filtered ordered documents\n */\nexport async function adapterCollectionWhereOrderLimitQuery(\n  props: AdapterCollectionWhereOrderLimitQueryProps\n) {\n  const { service, collection, wherePlan, order, limit, index } = props;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    wherePlan,\n    limit,\n    sort: order === \"desc\" ? \"-createdAt\" : \"createdAt\",\n    index,\n    convex: false,\n  });\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionWhereOrderLimitQuery\",\n            collection: collection,\n            wherePlan: wherePlan,\n            order: order,\n            limit: limit,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const query = (await client.query(\n    api.adapter.collectionWhereOrderLimitQuery,\n    {\n      collection: processor.convexQueryProps.collection,\n      wherePlan: processor.convexQueryProps.wherePlan,\n      order: processor.convexQueryProps.order,\n      limit: processor.convexQueryProps.limit,\n      index: processor.convexQueryProps.index ?? undefined,\n    }\n  )) as ConvexCollectionWhereOrderLimitQueryResult;\n\n  return query;\n}\n\n/**\n * Collection where order limit query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionWhereOrderLimitQuery = {\n  adapter: adapterCollectionWhereOrderLimitQuery,\n  convex: convexCollectionWhereOrderLimitQuery,\n};\n\n// ============================================================================\n// Collection Where Order Paginate Query\n// ============================================================================\n\n/**\n * Props for creating a Convex collection where order paginate query function.\n */\nexport type ConvexCollectionWhereOrderPaginateQueryProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side collection where order paginate query operation.\n */\nexport type AdapterCollectionWhereOrderPaginateQueryProps = {\n  service: AdapterService;\n  collection: string;\n  wherePlan: EnhancedParsedWhereFilter;\n  order: \"asc\" | \"desc\";\n  paginationOpts: PaginationOptions;\n  index?: AdapaterQueryIndex;\n};\n\n/**\n * Result type for collection where order paginate query operations.\n */\nexport type ConvexCollectionWhereOrderPaginateQueryResult =\n  ExtractConvexQueryResult<\n    ReturnType<typeof convexCollectionWhereOrderPaginateQuery>\n  >;\n\n/**\n * @function convexCollectionWhereOrderPaginateQuery\n * Creates a Convex query function to fetch filtered documents with ordering and pagination.\n * This is the most feature-complete query combining filtering, ordering, and pagination.\n *\n * @param {ConvexCollectionWhereOrderPaginateQueryProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredQuery} A Convex query function that fetches paginated filtered ordered documents\n */\nexport function convexCollectionWhereOrderPaginateQuery(\n  props: ConvexCollectionWhereOrderPaginateQueryProps\n) {\n  const { service } = props;\n  return queryGeneric({\n    args: {\n      collection: v.string(),\n      wherePlan: v.optional(v.any()),\n      order: v.union(v.literal(\"asc\"), v.literal(\"desc\")),\n      paginationOpts: v.object({\n        numItems: v.number(),\n        cursor: v.union(v.string(), v.null()),\n      }),\n      index: v.optional(\n        v.union(\n          v.object({\n            indexName: v.string(),\n            indexRange: v.optional(v.any()),\n          }),\n          v.null()\n        )\n      ),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        wherePlan: args.wherePlan,\n        index: args.index as AdapaterQueryIndex,\n        convex: true,\n      });\n\n      const query = await processor\n        .query()\n        .order(args.order)\n        .paginate(args.paginationOpts)\n        .postFilter()\n        .toPayload();\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"collectionWhereOrderPaginateQuery\",\n              args,\n              query,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return query;\n    },\n  });\n}\n\n/**\n * @function adapterCollectionWhereOrderPaginateQuery\n * Adapter-side function to fetch filtered documents with ordering and pagination.\n *\n * @param {AdapterCollectionWhereOrderPaginateQueryProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {ParsedWhereFilter} props.wherePlan - The parsed where filter\n * @param {\"asc\" | \"desc\"} props.order - Sort order direction\n * @param {PaginationOptions} props.paginationOpts - Pagination configuration\n * @param {AdapaterQueryIndex} props.index - Optional index configuration\n * @returns {Promise<ConvexCollectionWhereOrderPaginateQueryResult>} Paginated result with filtered ordered documents\n */\nexport async function adapterCollectionWhereOrderPaginateQuery(\n  props: AdapterCollectionWhereOrderPaginateQueryProps\n) {\n  const { service, collection, wherePlan, order, paginationOpts, index } =\n    props;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    wherePlan,\n    sort: order === \"desc\" ? \"-createdAt\" : \"createdAt\",\n    pagination: true,\n    index,\n    convex: false,\n  });\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterCollectionWhereOrderPaginateQuery\",\n            collection: collection,\n            wherePlan: wherePlan,\n            order: order,\n            paginationOpts: paginationOpts,\n            index: index,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const query = (await client.query(\n    api.adapter.collectionWhereOrderPaginateQuery,\n    {\n      collection: processor.convexQueryProps.collection,\n      wherePlan: processor.convexQueryProps.wherePlan,\n      order: processor.convexQueryProps.order,\n      paginationOpts: paginationOpts,\n      index: processor.convexQueryProps.index ?? undefined,\n    }\n  )) as ConvexCollectionWhereOrderPaginateQueryResult;\n\n  return query;\n}\n\n/**\n * Collection where order paginate query operation bundle containing both adapter and convex implementations.\n */\nexport const collectionWhereOrderPaginateQuery = {\n  adapter: adapterCollectionWhereOrderPaginateQuery,\n  convex: convexCollectionWhereOrderPaginateQuery,\n};\n\n// ============================================================================\n// Query Adapter\n// ============================================================================\n\n/**\n * Props for creating the Query Adapter factory.\n */\nexport type QueryAdapterProps = {};\n\n/**\n * @function QueryAdapter\n * Factory function that creates a Query Adapter instance with all available query operations.\n * This is the main entry point for accessing query functionality in the adapter.\n *\n * @param {QueryAdapterProps} props - Configuration options (currently empty)\n * @returns {Object} An object containing all query operation bundles:\n *   - getById: Fetch single document by ID\n *   - collectionQuery: Fetch all documents from collection\n *   - collectionCountQuery: Count documents with optional filtering\n *   - collectionWhereQuery: Fetch documents matching filter\n *   - collectionWhereOrderQuery: Fetch filtered documents with ordering\n *   - collectionWhereLimitQuery: Fetch filtered documents with limit\n *   - collectionWherePaginateQuery: Fetch filtered documents with pagination\n *   - collectionWhereOrderLimitQuery: Fetch filtered documents with ordering and limit\n *   - collectionWhereOrderPaginateQuery: Fetch filtered documents with ordering and pagination\n *   - collectionOrderQuery: Fetch documents with ordering\n *   - collectionOrderLimitQuery: Fetch documents with ordering and limit\n *   - collectionOrderPaginateQuery: Fetch documents with ordering and pagination\n *   - collectionLimitQuery: Fetch documents with limit\n */\nexport function QueryAdapter(props: QueryAdapterProps) {\n  return {\n    getById,\n    collectionQuery,\n    collectionCountQuery,\n    // Where-based queries (use ParsedWhereFilter)\n    collectionWhereQuery,\n    collectionWhereOrderQuery,\n    collectionWhereLimitQuery,\n    collectionWherePaginateQuery,\n    collectionWhereOrderLimitQuery,\n    collectionWhereOrderPaginateQuery,\n    // Non-filter queries\n    collectionOrderQuery,\n    collectionOrderLimitQuery,\n    collectionOrderPaginateQuery,\n    collectionLimitQuery,\n  };\n}\n","/**\n * @fileoverview Mutation Adapter for Convex Database Operations\n *\n * This module provides a comprehensive set of mutation operations for interacting with\n * Convex databases through the Payload adapter. It implements a two-layer architecture:\n *\n * 1. **Convex Functions** (`convex*`): Define the Convex mutation handlers that run on the server\n * 2. **Adapter Functions** (`adapter*`): Client-side wrappers that invoke the Convex mutations\n *\n * Each mutation operation handles data modification including insert, update, delete,\n * and upsert operations. Where-based mutations use the ParsedWhereFilter system for\n * type-safe, serializable query conditions.\n *\n * @module mutation-adapter\n */\n\nimport {\n  mutationGeneric,\n  GenericMutationCtx,\n  GenericDataModel,\n  RegisteredMutation,\n} from \"convex/server\";\nimport { v } from \"convex/values\";\n\nimport type { AdapterService } from \"../adapter/service\";\nimport type { EnhancedParsedWhereFilter } from \"../tools/query-processor\";\n\n/**\n * Extracts the result type from a Convex mutation operation.\n * Handles nested Promise types and returns the unwrapped result.\n */\nexport type ExtractConvexMutationResult<T> =\n  T extends Promise<RegisteredMutation<any, any, Promise<infer R>>>\n    ? R\n    : T extends RegisteredMutation<any, any, Promise<infer R>>\n      ? R\n      : T extends Promise<RegisteredMutation<any, any, infer R>>\n        ? R\n        : T extends RegisteredMutation<any, any, infer R>\n          ? R\n          : T;\n\n// ============================================================================\n// Insert\n// ============================================================================\n\n/**\n * Props for creating a Convex insert mutation function.\n */\nexport type ConvexInsertProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side insert operation.\n */\nexport type AdapterInsertProps = {\n  service: AdapterService;\n  collection: string;\n  data: Record<string, unknown>;\n};\n\n/**\n * Result type for insert operations (returns the new document ID).\n */\nexport type ConvexInsertResult = ExtractConvexMutationResult<\n  ReturnType<typeof convexInsert>\n>;\n\n/**\n * @function convexInsert\n * Creates a Convex mutation function to insert a new document into a collection.\n * Automatically applies the collection prefix from the service configuration.\n *\n * @param {ConvexInsertProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredMutation} A Convex mutation function that inserts a document\n */\nexport function convexInsert(props: ConvexInsertProps) {\n  const { service } = props;\n  return mutationGeneric({\n    args: {\n      collection: v.string(),\n      data: v.any(),\n    },\n    handler: async (ctx, args) => {\n      // args.collection is already prefixed by adapter\n      const result = await ctx.db.insert(args.collection as any, args.data);\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"insert\",\n              args: args,\n              result: result,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return result;\n    },\n  });\n}\n\n/**\n * @function adapterInsert\n * Adapter-side function to insert a new document into a collection.\n *\n * @template T - The type of the document data\n * @param {AdapterInsertProps<T>} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {T} props.data - The document data to insert\n * @returns {Promise<ConvexInsertResult>} The ID of the newly inserted document\n */\nexport async function adapterInsert(props: AdapterInsertProps) {\n  const { service, collection, data } = props;\n\n  // Transform data to Convex format using QueryProcessor\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    data,\n    convex: false,\n  });\n  const compiledData = processor.convexQueryProps.data!;\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const result = (await client.mutation(api.adapter.insert, {\n    collection: processor.convexQueryProps.collection,\n    data: processor.convexQueryProps.data,\n  })) as ConvexInsertResult;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterInsert\",\n            collection: collection,\n            data: data,\n            compiledData: compiledData,\n            queryResult: result,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  return result as string;\n}\n\n/**\n * Insert operation bundle containing both adapter and convex implementations.\n */\nexport const insert = {\n  adapter: adapterInsert,\n  convex: convexInsert,\n};\n\n// ============================================================================\n// Get By ID (Mutation)\n// ============================================================================\n\n/**\n * Props for creating a Convex getByIdMutation function.\n */\nexport type ConvexGetByIdMutationProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side getByIdMutation operation.\n */\nexport type AdapterGetByIdMutationProps = {\n  service: AdapterService;\n  collection: string;\n  id: string;\n};\n\n/**\n * Result type for getByIdMutation operations.\n */\nexport type ConvexGetByIdMutationResult = ExtractConvexMutationResult<\n  ReturnType<typeof convexGetByIdMutation>\n>;\n\n/**\n * @function convexGetByIdMutation\n * Creates a Convex mutation function to fetch a document by ID within a mutation context.\n * Useful when you need to read data as part of a transactional operation.\n * Returns the document in Payload format (with id instead of _id, etc.).\n *\n * @param {ConvexGetByIdMutationProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredMutation} A Convex mutation function that fetches a document by ID\n */\nexport function convexGetByIdMutation(props: ConvexGetByIdMutationProps) {\n  const { service } = props;\n  return mutationGeneric({\n    args: {\n      collection: v.string(),\n      id: v.string(),\n    },\n    handler: async (ctx, args) => {\n      const doc = await ctx.db.get(args.collection, args.id as any);\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"getByIdMutation\",\n              args: args,\n              result: doc,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      if (!doc) return null;\n\n      // Transform to Payload format\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        convex: true,\n      });\n\n      return processor.toPayload(doc);\n    },\n  });\n}\n\n/**\n * @function adapterGetByIdMutation\n * Adapter-side function to fetch a document by ID within a mutation context.\n *\n * @param {AdapterGetByIdMutationProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {string} props.id - The document ID to fetch\n * @returns {Promise<ConvexGetByIdMutationResult>} The fetched document or null\n */\nexport async function adapterGetByIdMutation(\n  props: AdapterGetByIdMutationProps\n) {\n  const { service, collection, id } = props;\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const collectionId = service.tools.parseCollection({\n    prefix: service.system.prefix,\n    collection: collection,\n  });\n\n  const result = (await client.mutation(api.adapter.getByIdMutation, {\n    collection: collectionId,\n    id,\n  })) as ConvexGetByIdMutationResult;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterGetByIdMutation\",\n            collection: collection,\n            id: id,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  return result;\n}\n\n/**\n * GetByIdMutation operation bundle containing both adapter and convex implementations.\n */\nexport const getByIdMutation = {\n  adapter: adapterGetByIdMutation,\n  convex: convexGetByIdMutation,\n};\n\n// ============================================================================\n// Patch\n// ============================================================================\n\n/**\n * Props for creating a Convex patch mutation function.\n */\nexport type ConvexPatchProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side patch operation.\n */\nexport type AdapterPatchProps<T> = {\n  service: AdapterService;\n  id: string;\n  data: Partial<T>;\n};\n\n/**\n * Result type for patch operations.\n */\nexport type ConvexPatchResult = ExtractConvexMutationResult<\n  ReturnType<typeof convexPatch>\n>;\n\n/**\n * @function convexPatch\n * Creates a Convex mutation function to partially update a document.\n * Only the specified fields are updated, leaving other fields unchanged.\n *\n * @param {ConvexPatchProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredMutation} A Convex mutation function that patches a document\n */\nexport function convexPatch(props: ConvexPatchProps) {\n  const { service } = props;\n  return mutationGeneric({\n    args: {\n      id: v.optional(v.string()),\n      data: v.any(),\n    },\n    handler: async (ctx, args) => {\n      if (!args.id)\n        return service.system\n          .logger(\"No ID provided for patch operation - cancelling operation\")\n          .warn();\n\n      const result = await ctx.db.patch(args.id as any, args.data);\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"patch\",\n              args: args,\n              result: result,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return result;\n    },\n  });\n}\n\n/**\n * @function adapterPatch\n * Adapter-side function to partially update a document.\n *\n * @template T - The type of the document data\n * @param {AdapterPatchProps<T>} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.id - The document ID to update\n * @param {Partial<T>} props.data - The partial data to merge into the document\n * @returns {Promise<ConvexPatchResult>} The result of the patch operation\n */\nexport async function adapterPatch<T>(props: AdapterPatchProps<T>) {\n  const { service, id, data } = props;\n\n  // Transform data to Convex format using QueryProcessor\n  // Note: We need a collection name, but patch doesn't have one. Use a placeholder.\n  // The data transformation doesn't depend on collection name.\n  const processor = service.tools.queryProcessor({\n    service,\n    collection: \"_temp\", // Placeholder - not used for data transformation\n    data,\n    convex: false,\n  });\n  const compiledData = processor.convexQueryProps.data!;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterPatch\",\n            id: id,\n            data: data,\n            compiledData: compiledData,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const result = (await client.mutation(api.adapter.patch, {\n    id,\n    data: compiledData,\n  })) as ConvexPatchResult;\n\n  return result;\n}\n\n/**\n * Patch operation bundle containing both adapter and convex implementations.\n */\nexport const patch = {\n  adapter: adapterPatch,\n  convex: convexPatch,\n};\n\n// ============================================================================\n// Replace\n// ============================================================================\n\n/**\n * Props for creating a Convex replace mutation function.\n */\nexport type ConvexReplaceProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side replace operation.\n */\nexport type AdapterReplaceProps<T> = {\n  service: AdapterService;\n  id: string;\n  data: T;\n};\n\n/**\n * Result type for replace operations.\n */\nexport type ConvexReplaceResult = ExtractConvexMutationResult<\n  ReturnType<typeof convexReplace>\n>;\n\n/**\n * @function convexReplace\n * Creates a Convex mutation function to completely replace a document.\n * The entire document is replaced with the new data, removing any fields not specified.\n *\n * @param {ConvexReplaceProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredMutation} A Convex mutation function that replaces a document\n */\nexport function convexReplace(props: ConvexReplaceProps) {\n  const { service } = props;\n  return mutationGeneric({\n    args: {\n      id: v.string(),\n      data: v.any(),\n    },\n    handler: async (ctx, args) => {\n      // Transform data to Convex format before replacing\n      const result = await ctx.db.replace(args.id as any, args.data);\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"replace\",\n              args: args,\n              result: result,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return result;\n    },\n  });\n}\n\n/**\n * @function adapterReplace\n * Adapter-side function to completely replace a document.\n *\n * @template T - The type of the document data\n * @param {AdapterReplaceProps<T>} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.id - The document ID to replace\n * @param {T} props.data - The new document data\n * @returns {Promise<ConvexReplaceResult>} The result of the replace operation\n */\nexport async function adapterReplace<T>(props: AdapterReplaceProps<T>) {\n  const { service, id, data } = props;\n\n  // Transform data to Convex format using QueryProcessor\n  // Note: We need a collection name, but replace doesn't have one. Use a placeholder.\n  // The data transformation doesn't depend on collection name.\n  const processor = service.tools.queryProcessor({\n    service,\n    collection: \"_temp\", // Placeholder - not used for data transformation\n    data: data as Record<string, unknown>,\n    convex: false,\n  });\n  const compiledData = processor.convexQueryProps.data!;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterReplace\",\n            id: id,\n            data: data,\n            compiledData: compiledData,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const result = (await client.mutation(api.adapter.replace, {\n    id,\n    data: compiledData,\n  })) as ConvexReplaceResult;\n\n  return result;\n}\n\n/**\n * Replace operation bundle containing both adapter and convex implementations.\n */\nexport const replace = {\n  adapter: adapterReplace,\n  convex: convexReplace,\n};\n\n// ============================================================================\n// Delete\n// ============================================================================\n\n/**\n * Props for creating a Convex delete mutation function.\n */\nexport type ConvexDeleteProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side delete operation.\n */\nexport type AdapterDeleteProps = {\n  service: AdapterService;\n  id: string;\n};\n\n/**\n * Result type for delete operations.\n */\nexport type ConvexDeleteResult = ExtractConvexMutationResult<\n  ReturnType<typeof convexDelete>\n>;\n\n/**\n * @function convexDelete\n * Creates a Convex mutation function to delete a document by ID.\n *\n * @param {ConvexDeleteProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredMutation} A Convex mutation function that deletes a document\n */\nexport function convexDelete(props: ConvexDeleteProps) {\n  const { service } = props;\n  return mutationGeneric({\n    args: {\n      id: v.string(),\n    },\n    handler: async (ctx, args) => {\n      const result = await ctx.db.delete(args.id as any);\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"delete\",\n              args: args,\n              result: result,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return result;\n    },\n  });\n}\n\n/**\n * @function adapterDelete\n * Adapter-side function to delete a document by ID.\n *\n * @param {AdapterDeleteProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.id - The document ID to delete\n * @returns {Promise<ConvexDeleteResult>} The result of the delete operation\n */\nexport async function adapterDelete(props: AdapterDeleteProps) {\n  const { service, id } = props;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterDelete\",\n            id: id,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const result = (await client.mutation(api.adapter.delete, {\n    id,\n  })) as ConvexDeleteResult;\n\n  return result;\n}\n\n/**\n * Delete operation bundle containing both adapter and convex implementations.\n * Named `deleteOp` to avoid conflict with JavaScript's reserved `delete` keyword.\n */\nexport const deleteOp = {\n  adapter: adapterDelete,\n  convex: convexDelete,\n};\n\n// ============================================================================\n// Upsert\n// ============================================================================\n\n/**\n * Props for creating a Convex upsert mutation function.\n */\nexport type ConvexUpsertProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side upsert operation.\n */\nexport type AdapterUpsertProps<T> = {\n  service: AdapterService;\n  collection: string;\n  id?: string;\n  data: T;\n};\n\n/**\n * Result type for upsert operations.\n */\nexport type ConvexUpsertResult = ExtractConvexMutationResult<\n  ReturnType<typeof convexUpsert>\n>;\n\n/**\n * @function convexUpsert\n * Creates a Convex mutation function to insert or update a document.\n * If an ID is provided and the document exists, it will be patched.\n * Otherwise, a new document will be inserted.\n *\n * @param {ConvexUpsertProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredMutation} A Convex mutation function that upserts a document\n */\nexport function convexUpsert(props: ConvexUpsertProps) {\n  const { service } = props;\n  return mutationGeneric({\n    args: {\n      collection: v.string(),\n      id: v.optional(v.string()),\n      data: v.any(),\n    },\n    handler: async (ctx, args) => {\n      let result;\n\n      if (args.id) {\n        const existing = await ctx.db.get(args.id as any);\n        if (existing) {\n          result = await ctx.db.patch(args.id as any, args.data);\n        } else {\n          // args.collection is already prefixed by adapter\n          result = await ctx.db.insert(args.collection as any, args.data);\n        }\n      } else {\n        // args.collection is already prefixed by adapter\n        result = await ctx.db.insert(args.collection as any, args.data);\n      }\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"upsert\",\n              args: args,\n              result: result,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return result;\n    },\n  });\n}\n\n/**\n * @function adapterUpsert\n * Adapter-side function to insert or update a document.\n *\n * @template T - The type of the document data\n * @param {AdapterUpsertProps<T>} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {string} [props.id] - Optional document ID for update\n * @param {T} props.data - The document data\n * @returns {Promise<ConvexUpsertResult>} The ID of the upserted document or void if patched\n */\nexport async function adapterUpsert<T>(props: AdapterUpsertProps<T>) {\n  const { service, collection, id, data } = props;\n\n  // Transform data to Convex format using QueryProcessor\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    data: data as Record<string, unknown>,\n    convex: false,\n  });\n\n  const compiledData = processor.convexQueryProps.data!;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterUpsert\",\n            collection: collection,\n            id: id,\n            data: data,\n            compiledData: compiledData,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const result = (await client.mutation(api.adapter.upsert, {\n    collection: processor.convexQueryProps.collection,\n    id,\n    data: processor.convexQueryProps.data,\n  })) as ConvexUpsertResult;\n\n  return result;\n}\n\n/**\n * Upsert operation bundle containing both adapter and convex implementations.\n */\nexport const upsert = {\n  adapter: adapterUpsert,\n  convex: convexUpsert,\n};\n\n// ============================================================================\n// Update Many Where\n// ============================================================================\n\n/**\n * Props for creating a Convex updateManyWhere mutation function.\n */\nexport type ConvexUpdateManyWhereProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side updateManyWhere operation.\n */\nexport type AdapterUpdateManyWhereProps<T> = {\n  service: AdapterService;\n  collection: string;\n  wherePlan: EnhancedParsedWhereFilter;\n  data: Partial<T>;\n};\n\n/**\n * Result type for updateManyWhere operations.\n */\nexport type ConvexUpdateManyWhereResult = ExtractConvexMutationResult<\n  ReturnType<typeof convexUpdateManyWhere>\n>;\n\n/**\n * @function convexUpdateManyWhere\n * Creates a Convex mutation function to update multiple documents matching a filter.\n * Uses the ParsedWhereFilter system for type-safe filtering.\n *\n * @param {ConvexUpdateManyWhereProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredMutation} A Convex mutation function that updates matching documents\n */\nexport function convexUpdateManyWhere(props: ConvexUpdateManyWhereProps) {\n  const { service } = props;\n  return mutationGeneric({\n    args: {\n      collection: v.string(),\n      wherePlan: v.optional(v.any()),\n      data: v.any(),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        wherePlan: args.wherePlan as EnhancedParsedWhereFilter,\n        convex: true,\n      });\n\n      const docs = await processor.query().postFilter().collect();\n\n      // Patch each document individually\n      await Promise.all(\n        docs.map((doc) => ctx.db.patch(doc._id as any, args.data))\n      );\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"updateManyWhere\",\n              args: args,\n              docsUpdated: docs.length,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return docs.length;\n    },\n  });\n}\n\n/**\n * @function adapterUpdateManyWhere\n * Adapter-side function to update multiple documents matching a filter.\n *\n * @template T - The type of the document data\n * @param {AdapterUpdateManyWhereProps<T>} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {ParsedWhereFilter} props.wherePlan - The parsed where filter\n * @param {Partial<T>} props.data - The partial data to merge into matching documents\n * @returns {Promise<ConvexUpdateManyWhereResult>} Array of update results\n */\nexport async function adapterUpdateManyWhere<T>(\n  props: AdapterUpdateManyWhereProps<T>\n) {\n  const { service, collection, wherePlan, data } = props;\n\n  // Transform data to Convex format using QueryProcessor\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    data,\n    convex: false,\n  });\n\n  const compiledData = processor.convexQueryProps.data!;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterUpdateManyWhere\",\n            collection: collection,\n            wherePlan: wherePlan,\n            data: data,\n            compiledData: compiledData,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const result = (await client.mutation(api.adapter.updateManyWhere, {\n    collection: processor.convexQueryProps.collection,\n    wherePlan: processor.convexQueryProps.wherePlan,\n    data: processor.convexQueryProps.data,\n  })) as ConvexUpdateManyWhereResult;\n\n  return result;\n}\n\n/**\n * UpdateManyWhere operation bundle containing both adapter and convex implementations.\n */\nexport const updateManyWhere = {\n  adapter: adapterUpdateManyWhere,\n  convex: convexUpdateManyWhere,\n};\n\n// ============================================================================\n// Delete Many Where\n// ============================================================================\n\n/**\n * Props for creating a Convex deleteManyWhere mutation function.\n */\nexport type ConvexDeleteManyWhereProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side deleteManyWhere operation.\n */\nexport type AdapterDeleteManyWhereProps = {\n  service: AdapterService;\n  collection: string;\n  wherePlan: EnhancedParsedWhereFilter;\n};\n\n/**\n * Result type for deleteManyWhere operations.\n */\nexport type ConvexDeleteManyWhereResult = ExtractConvexMutationResult<\n  ReturnType<typeof convexDeleteManyWhere>\n>;\n\n/**\n * @function convexDeleteManyWhere\n * Creates a Convex mutation function to delete multiple documents matching a filter.\n * Uses the ParsedWhereFilter system for type-safe filtering.\n *\n * @param {ConvexDeleteManyWhereProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredMutation} A Convex mutation function that deletes matching documents\n */\nexport function convexDeleteManyWhere(props: ConvexDeleteManyWhereProps) {\n  const { service } = props;\n  return mutationGeneric({\n    args: {\n      collection: v.string(),\n      wherePlan: v.optional(v.any()),\n    },\n    handler: async (ctx, args) => {\n      const processor = service.tools.queryProcessor({\n        ctx,\n        service,\n        collection: args.collection,\n        wherePlan: args.wherePlan as EnhancedParsedWhereFilter,\n        convex: true,\n      });\n\n      const docs = await processor.query().postFilter().collect();\n\n      const result = await Promise.all(\n        docs.map((doc) => ctx.db.delete(doc._id as any))\n      );\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"deleteManyWhere\",\n              args: args,\n              docsDeleted: docs.length,\n              result: result,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return result;\n    },\n  });\n}\n\n/**\n * @function adapterDeleteManyWhere\n * Adapter-side function to delete multiple documents matching a filter.\n *\n * @param {AdapterDeleteManyWhereProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.collection - The collection name\n * @param {ParsedWhereFilter} props.wherePlan - The parsed where filter\n * @returns {Promise<ConvexDeleteManyWhereResult>} Array of delete results\n */\nexport async function adapterDeleteManyWhere(\n  props: AdapterDeleteManyWhereProps\n) {\n  const { service, collection, wherePlan } = props;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterDeleteManyWhere\",\n            collection: collection,\n            wherePlan: wherePlan,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const processor = service.tools.queryProcessor({\n    service,\n    collection,\n    wherePlan,\n    convex: false,\n  });\n\n  const result = (await client.mutation(api.adapter.deleteManyWhere, {\n    collection: processor.convexQueryProps.collection,\n    wherePlan: processor.convexQueryProps.wherePlan,\n  })) as ConvexDeleteManyWhereResult;\n\n  return result;\n}\n\n/**\n * DeleteManyWhere operation bundle containing both adapter and convex implementations.\n */\nexport const deleteManyWhere = {\n  adapter: adapterDeleteManyWhere,\n  convex: convexDeleteManyWhere,\n};\n\n// ============================================================================\n// Increment\n// ============================================================================\n\n/**\n * Props for creating a Convex increment mutation function.\n */\nexport type ConvexIncrementProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side increment operation.\n */\nexport type AdapterIncrementProps = {\n  service: AdapterService;\n  id: string;\n  field: string;\n  amount: number;\n};\n\n/**\n * Result type for increment operations.\n */\nexport type ConvexIncrementResult = ExtractConvexMutationResult<\n  ReturnType<typeof convexIncrement>\n>;\n\n/**\n * Normalizes a Payload field name to Convex format.\n * System fields (id, createdAt, updatedAt) are mapped to Convex equivalents.\n * Other fields are prefixed with payvex_.\n * @internal\n */\nfunction normalizeFieldToConvex(field: string): string {\n  if (field === \"id\") return \"_id\";\n  if (field === \"_id\") return \"_id\";\n  if (field === \"createdAt\") return \"_creationTime\";\n  if (field === \"_creationTime\") return \"_creationTime\";\n  if (field === \"updatedAt\") return \"_updatedTime\";\n  if (field === \"_updatedTime\") return \"_updatedTime\";\n  if (field.startsWith(\"payvex_\")) return field;\n  return `payvex_${field}`;\n}\n\n/**\n * @function convexIncrement\n * Creates a Convex mutation function to atomically increment a numeric field.\n * This is useful for counters, scores, and other numeric values that need atomic updates.\n * Handles field name normalization (adds payvex_ prefix for user fields).\n *\n * @param {ConvexIncrementProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredMutation} A Convex mutation function that increments a field\n */\nexport function convexIncrement(props: ConvexIncrementProps) {\n  const { service } = props;\n  return mutationGeneric({\n    args: {\n      id: v.string(),\n      field: v.string(),\n      amount: v.number(),\n    },\n    handler: async (ctx, args) => {\n      const doc = await ctx.db.get(args.id as any);\n      if (!doc) {\n        service.system\n          .logger(\n            JSON.stringify(\n              {\n                operation: \"increment\",\n                args: args,\n                result: null,\n                error: \"Document not found\",\n              },\n              null,\n              2\n            )\n          )\n          .log();\n        return null;\n      }\n\n      // Normalize field name to Convex format (add payvex_ prefix if needed)\n      const convexField = normalizeFieldToConvex(args.field);\n      const currentValue = (doc as any)[convexField] ?? 0;\n\n      const result = await ctx.db.patch(args.id as any, {\n        [convexField]: currentValue + args.amount,\n      });\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"increment\",\n              args: args,\n              convexField: convexField,\n              previousValue: currentValue,\n              newValue: currentValue + args.amount,\n              result: result,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return result;\n    },\n  });\n}\n\n/**\n * @function adapterIncrement\n * Adapter-side function to atomically increment a numeric field.\n *\n * @param {AdapterIncrementProps} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {string} props.id - The document ID\n * @param {string} props.field - The field name to increment\n * @param {number} props.amount - The amount to add (can be negative for decrement)\n * @returns {Promise<ConvexIncrementResult>} The result of the increment operation or null if document not found\n */\nexport async function adapterIncrement(props: AdapterIncrementProps) {\n  const { service, id, field, amount } = props;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterIncrement\",\n            id: id,\n            field: field,\n            amount: amount,\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const result = (await client.mutation(api.adapter.increment, {\n    id,\n    field,\n    amount,\n  })) as ConvexIncrementResult;\n\n  return result;\n}\n\n/**\n * Increment operation bundle containing both adapter and convex implementations.\n */\nexport const increment = {\n  adapter: adapterIncrement,\n  convex: convexIncrement,\n};\n\n// ============================================================================\n// Transactional\n// ============================================================================\n\n/**\n * Props for creating a Convex transactional mutation function.\n */\nexport type ConvexTransactionalProps = {\n  service: AdapterService;\n};\n\n/**\n * Props for the adapter-side transactional operation.\n */\nexport type AdapterTransactionalProps<T> = {\n  service: AdapterService;\n  run: (ctx: GenericMutationCtx<GenericDataModel>) => Promise<T>;\n};\n\n/**\n * Result type for transactional operations.\n */\nexport type ConvexTransactionalResult = ExtractConvexMutationResult<\n  ReturnType<typeof convexTransactional>\n>;\n\n/**\n * @function convexTransactional\n * Creates a Convex mutation function to run custom transactional logic.\n * Allows executing arbitrary mutation logic within a Convex transaction context.\n *\n * @param {ConvexTransactionalProps} props - The function configuration\n * @param {AdapterService} props.service - The adapter service instance\n * @returns {RegisteredMutation} A Convex mutation function that runs transactional logic\n */\nexport function convexTransactional(props: ConvexTransactionalProps) {\n  const { service } = props;\n  return mutationGeneric({\n    args: {\n      run: v.any(),\n    },\n    handler: async (ctx, args) => {\n      const result = await args.run(ctx);\n\n      service.system\n        .logger(\n          JSON.stringify(\n            {\n              operation: \"transactional\",\n              result: result,\n            },\n            null,\n            2\n          )\n        )\n        .log();\n\n      return result;\n    },\n  });\n}\n\n/**\n * @function adapterTransactional\n * Adapter-side function to run custom transactional logic.\n *\n * @template T - The return type of the transactional function\n * @param {AdapterTransactionalProps<T>} props - The operation parameters\n * @param {AdapterService} props.service - The adapter service instance\n * @param {Function} props.run - The function to execute within the transaction\n * @returns {Promise<ConvexTransactionalResult>} The result of the transactional function\n */\nexport async function adapterTransactional<T>(\n  props: AdapterTransactionalProps<T>\n) {\n  const { service, run } = props;\n\n  if (service.system.isDev) {\n    service.system\n      .logger(\n        JSON.stringify(\n          {\n            adapter: \"adapterTransactional\",\n            message: \"Executing transactional operation\",\n          },\n          null,\n          2\n        )\n      )\n      .log();\n  }\n\n  const client = service.db.client.directClient;\n  const api = service.db.api;\n\n  const result = (await client.mutation(api.adapter.transactional, {\n    run,\n  })) as ConvexTransactionalResult;\n\n  return result;\n}\n\n/**\n * Transactional operation bundle containing both adapter and convex implementations.\n */\nexport const transactional = {\n  adapter: adapterTransactional,\n  convex: convexTransactional,\n};\n\n// ============================================================================\n// Mutation Adapter\n// ============================================================================\n\n/**\n * Props for creating the Mutation Adapter factory.\n */\nexport type MutationAdapterProps = {};\n\n/**\n * @function MutationAdapter\n * Factory function that creates a Mutation Adapter instance with all available mutation operations.\n * This is the main entry point for accessing mutation functionality in the adapter.\n *\n * @param {MutationAdapterProps} props - Configuration options (currently empty)\n * @returns {Object} An object containing all mutation operation bundles:\n *   - insert: Insert a new document\n *   - getByIdMutation: Fetch document by ID in mutation context\n *   - patch: Partially update a document\n *   - replace: Completely replace a document\n *   - deleteOp: Delete a document by ID\n *   - upsert: Insert or update a document\n *   - updateManyWhere: Update multiple documents matching a filter\n *   - deleteManyWhere: Delete multiple documents matching a filter\n *   - increment: Atomically increment a numeric field\n *   - transactional: Run custom transactional logic\n */\nexport function MutationAdapter(props: MutationAdapterProps) {\n  return {\n    insert,\n    getByIdMutation,\n    patch,\n    replace,\n    deleteOp,\n    upsert,\n    // Where-based mutations (use ParsedWhereFilter)\n    updateManyWhere,\n    deleteManyWhere,\n    // Other mutations\n    increment,\n    transactional,\n  };\n}\n"]}